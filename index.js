"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class TsReq{constructor(e){this.url=e,this.defaultHeader={"Content-Type":"application/json","Cache-Control":"no-cache",Accept:"*"},this.resolveStatus=[0,100,101,200,201,202,203,204,205,206]}bodyParser(e){return e instanceof FormData||"object"!=typeof e?e:JSON.stringify(e)}dataParser(e){const t=e.getResponseHeader("Content-Type"),s=e.response;return t&&-1!==t.indexOf("json")?JSON.parse(s):s}send(e){return new Promise(((t,s)=>{try{const a=new XMLHttpRequest;if(!a)return s("XMLHttpRequest의 인스턴스를 만들 수 없습니다.");const r="string"==typeof e.pathname&&"/"!==e.pathname?this.url+e.pathname:this.url;a.onreadystatechange=()=>{try{a.readyState===a.DONE&&(this.resolveStatus.includes(a.status)?t({status:a.status,data:this.dataParser(a)}):s({status:a.status,data:a.response})),"function"==typeof e.callback&&e.callback(a)}catch(e){s(e)}},a.open(e.method,r),Object.entries(Object.assign(Object.assign({},this.defaultHeader),e.headers)).forEach((([e,t])=>{a.setRequestHeader(e,t)})),a.send(this.bodyParser(e.body))}catch(e){s(e)}}))}get(e,t,s){return this.send({method:"GET",pathname:e,headers:t,callback:s})}post(e,t,s,a){return this.send({method:"POST",pathname:e,body:t,headers:s,callback:a})}}exports.default=TsReq;